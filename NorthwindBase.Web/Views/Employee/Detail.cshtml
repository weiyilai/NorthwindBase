@model NorthwindBase.Web.Models.Employee.EmployeeModel

@{
    ViewBag.Title = "員工明細";
    var filePath = "~/Scripts/Employee/Employee.js";
    string modified = File.
        GetLastWriteTime(Server.MapPath(filePath)).
        ToString("yyyyMMddHHmmssfff");
    var jsSrc = $"{filePath}?{modified}";
    var actionModel = Model.ActionMode == ActionType.Add ? "新增" : Model.ActionMode == ActionType.Edit ? "修改" : string.Empty;
}

@section styles {
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="//jqueryui.com/resources/demos/style.css">
    <style type="text/css">
        .datag, .datetest {
            position: relative;
        }

        .ui-datepicker-trigger {
            position: absolute;
            width: 16px;
            height: 15px;
        }
    </style>
}

@section scripts {
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>    
    <script src="~/Scripts/jquery.blockUI.js"></script>
    <script src="@Url.Content(jsSrc)"></script>
    <script type="text/javascript">
        var datePickerConfig = {
            changeMonth: true,
            changeYear: true,
            showOn: 'both',
            buttonImage: '//jqueryui.com/resources/demos/datepicker/images/calendar.gif',
            buttonImageOnly: true,
            buttonText: 'Select date',
            dateFormat: 'yy/mm/dd',
            yearRange: '1900:' + (new Date).getFullYear()
        };

        $('#BirthDate').datepicker(datePickerConfig);
        $('#HireDate').datepicker(datePickerConfig);
    </script>
}

<h2>@ViewBag.Title - @actionModel</h2>

<form id="form-Detail">
    @Html.Hidden("ActionMode", (int)Model.ActionMode)
    @Html.HiddenFor(m => m.EmployeeID)
    <table class="table">
        <tbody>
            <tr>
                <th>Photo</th>
                <td>
                    @if (Model.ActionMode == ActionType.Add)
                    {
                        @Html.TextBox("PhotoImg", null, new { type = "file" })
                    }
                    else
                    {
                        <img src="data:image/jpeg;base64,@System.Convert.ToBase64String(Model.Photo)" />
                    }
                </td>
            </tr>
            <tr>
                <th>Employee ID</th>
                <td>
                    @if (Model.ActionMode == ActionType.Add)
                    {
                        @Html.Raw("automatically generated by the system")
                    }
                    else
                    {
                        @Model.EmployeeID
                    }
                </td>
            </tr>
            <tr>
                <th>Last Name</th>
                <td>@Html.TextBoxFor(m => m.LastName)</td>
            </tr>
            <tr>
                <th>First Name</th>
                <td>@Html.TextBoxFor(m => m.FirstName)</td>
            </tr>
            <tr>
                <th>Title</th>
                <td>@Html.TextBoxFor(m => m.Title)</td>
            </tr>
            <tr>
                <th>Title of Courtesy</th>
                <td>@Html.TextBoxFor(m => m.TitleOfCourtesy)</td>
            </tr>
            <tr>
                <th>Birth Date</th>
                <td>@Html.TextBoxFor(m => m.BirthDate, "{0:yyyy/MM/dd}")</td>
            </tr>
            <tr>
                <th>Hire Date</th>
                <td>@Html.TextBoxFor(m => m.HireDate, "{0:yyyy/MM/dd}")</td>
            </tr>
            <tr>
                <th>Address</th>
                <td>@Html.TextBoxFor(m => m.Address)</td>
            </tr>
            <tr>
                <th>City</th>
                <td>@Html.TextBoxFor(m => m.City)</td>
            </tr>
            <tr>
                <th>Region</th>
                <td>@Html.TextBoxFor(m => m.Region)</td>
            </tr>
            <tr>
                <th>Postal Code</th>
                <td>@Html.TextBoxFor(m => m.PostalCode)</td>
            </tr>
            <tr>
                <th>Country</th>
                <td>@Html.TextBoxFor(m => m.Country)</td>
            </tr>
            <tr>
                <th>Home Phone</th>
                <td>@Html.TextBoxFor(m => m.HomePhone)</td>
            </tr>
            <tr>
                <th>Extension</th>
                <td>@Html.TextBoxFor(m => m.Extension)</td>
            </tr>
            <tr>
                <th>Notes</th>
                <td>@Html.TextAreaFor(m => m.Notes, 8, 200, null)</td>
            </tr>
        </tbody>
    </table>    
</form>
<div style="text-align: right;">
    <button id="SaveBtn">Save</button>
    <button id="BackBtn">Back</button>
</div>